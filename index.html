<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Respiração 4-7-8</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #c3eaff, #e6f7ff);
      color: #03314b;
    }

    .container {
      background: #ffffffcc;
      backdrop-filter: blur(6px);
      padding: 32px 28px 36px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 360px;
      width: 100%;
    }

    h1 {
      margin-top: 0;
      font-size: 1.6rem;
      margin-bottom: 8px;
    }

    p {
      font-size: 0.95rem;
      line-height: 1.4;
      margin-bottom: 24px;
      color: #355f73;
    }

    .circle {
      width: 200px;
      height: 200px;
      margin: 0 auto 20px;
      border-radius: 50%;
      background: radial-gradient(circle at top, #8fd3f4, #4aa3c7);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 4s ease-in-out, box-shadow 4s ease-in-out;
      box-shadow: 0 0 0 rgba(79, 163, 199, 0.4);
    }

    .circle.grow {
      transform: scale(1);
      box-shadow: 0 0 40px rgba(79, 163, 199, 0.6);
    }

    .circle.shrink {
      transform: scale(0.6);
      box-shadow: 0 0 10px rgba(79, 163, 199, 0.2);
    }

    .circle.shrink {
      transform: scale(0.6);
    }

    .circle.grow {
      transform: scale(1);
    }

    .phase {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .timer {
      font-size: 2.5rem;
      font-weight: bold;
    }

    button {
      margin-top: 24px;
      padding: 12px 24px;
      font-size: 1rem;
      border: none;
      border-radius: 999px;
      background: #4aa3c7;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease;
    }

    button:hover {
      background: #3b92b4;
    }

    button:active {
      transform: scale(0.97);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Respiração 4‑7‑8</h1>
    <p>
      Um exercício simples para reduzir ansiedade e acalmar a mente.<br />
      Siga o ritmo guiado abaixo.
    </p>

    <div class="circle grow" id="circle"></div>

    <div class="phase" id="phase">Pronto?</div>
    <div class="timer" id="timer">—</div>

    <button id="startBtn">Iniciar exercício</button>
    <button id="stopBtn" style="display:none;background:#aaa;margin-left:8px;">Parar</button>
  </div>

  <script>
    const phaseEl = document.getElementById('phase');
    const timerEl = document.getElementById('timer');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const circle = document.getElementById('circle');

    let interval;
    let running = false;

    const phases = [
      { label: 'Inspire', seconds: 4, action: 'grow' },
      { label: 'Segure', seconds: 7, action: 'hold' },
      { label: 'Expire', seconds: 8, action: 'shrink' }
    ];

    function startExercise() {
      if (running) return;
      running = true;
      startBtn.disabled = true;
      stopBtn.style.display = 'inline-block';

      let phaseIndex = 0;

      function runPhase() {
        if (!running) return;

        const phase = phases[phaseIndex];
        let remaining = phase.seconds;

        phaseEl.textContent = phase.label;
        timerEl.textContent = remaining;

        if (phase.action === 'grow') {
          circle.classList.remove('shrink');
          circle.classList.add('grow');
          circle.style.transitionDuration = phase.seconds + 's';
        } else if (phase.action === 'shrink') {
          circle.classList.remove('grow');
          circle.classList.add('shrink');
          circle.style.transitionDuration = phase.seconds + 's';
        }

        interval = setInterval(() => {
          remaining--;
          timerEl.textContent = remaining;

          if (remaining <= 0) {
            clearInterval(interval);
            phaseIndex = (phaseIndex + 1) % phases.length;
            runPhase();
          }
        }, 1000);
      }

      runPhase();
    }

    startBtn.addEventListener('click', startExercise);

    stopBtn.addEventListener('click', () => {
      running = false;
      clearInterval(interval);
      phaseEl.textContent = 'Exercício parado';
      timerEl.textContent = '—';
      startBtn.disabled = false;
      stopBtn.style.display = 'none';
      circle.classList.remove('grow', 'shrink');
    });
  </script>
</body>
</html>
