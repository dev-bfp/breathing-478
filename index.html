<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Respiração 4-7-8</title>

  <style>
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #b6e3ff, #eef9ff);
      color: #03314b;
      padding: 16px;
    }

    .container {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      padding: clamp(20px, 5vw, 36px);
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
      text-align: center;
      max-width: 380px;
      width: 100%;
    }

    h1 {
      margin-top: 0;
      font-size: clamp(1.3rem, 4vw, 1.7rem);
      margin-bottom: 8px;
    }

    p {
      font-size: clamp(0.9rem, 3.5vw, 1rem);
      line-height: 1.5;
      margin-bottom: 24px;
      color: #355f73;
    }

    .circle {
      width: clamp(160px, 55vw, 220px);
      height: clamp(160px, 55vw, 220px);
      margin: 0 auto 24px;
      border-radius: 50%;
      background: radial-gradient(circle at top, #9adcf7, #4aa3c7);
      display: flex;
      align-items: center;
      justify-content: center;

      /* Estado base MENOR */
      transform: scale(0.6);
      box-shadow: 0 0 10px rgba(79, 163, 199, 0.2);
      transition: transform linear, box-shadow linear;
    }

    .circle.grow {
      transform: scale(1);
      box-shadow: 0 0 45px rgba(79, 163, 199, 0.6);
    }

    .circle.shrink {
      transform: scale(0.6);
      box-shadow: 0 0 10px rgba(79, 163, 199, 0.2);
    }

    .phase {
      font-size: clamp(1.1rem, 4vw, 1.3rem);
      font-weight: 600;
      margin-bottom: 6px;
    }

    .timer {
      font-size: clamp(2rem, 8vw, 2.8rem);
      font-weight: bold;
    }

    .buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 24px;
    }

    button {
      padding: 12px 24px;
      font-size: 1rem;
      border: none;
      border-radius: 999px;
      background: #4aa3c7;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease;
      min-width: 120px;
    }

    button:hover {
      background: #3b92b4;
    }

    button:active {
      transform: scale(0.97);
    }

    button.secondary {
      background: #9aaeb8;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Respiração 4-7-8</h1>
    <p>
      Um exercício simples para reduzir ansiedade e acalmar a mente.<br />
      Siga o ritmo guiado abaixo.
    </p>

    <div class="circle" id="circle"></div>

    <div class="phase" id="phase">Pronto?</div>
    <div class="timer" id="timer">—</div>

    <div class="buttons">
      <button id="startBtn">Iniciar</button>
      <button id="stopBtn" class="secondary" style="display:none;">Parar</button>
    </div>
  </div>

  <script>
    const phaseEl = document.getElementById('phase');
    const timerEl = document.getElementById('timer');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const circle = document.getElementById('circle');

    let interval;
    let running = false;

    const phases = [
      { label: 'Inspire', seconds: 4, action: 'grow' },
      { label: 'Segure', seconds: 7, action: 'hold' },
      { label: 'Expire', seconds: 8, action: 'shrink' }
    ];

    function startExercise() {
      if (running) return;
      running = true;

      startBtn.disabled = true;
      stopBtn.style.display = 'inline-block';

      let phaseIndex = 0;

      function runPhase() {
        if (!running) return;

        const phase = phases[phaseIndex];
        let remaining = phase.seconds;

        phaseEl.textContent = phase.label;
        timerEl.textContent = remaining;

        circle.style.transitionDuration = phase.seconds + 's';

        if (phase.action === 'grow') {
          circle.classList.remove('shrink');
          circle.classList.add('grow');
        } else if (phase.action === 'shrink') {
          circle.classList.remove('grow');
          circle.classList.add('shrink');
        }

        interval = setInterval(() => {
          remaining--;
          timerEl.textContent = remaining;

          if (remaining <= 0) {
            clearInterval(interval);
            phaseIndex = (phaseIndex + 1) % phases.length;
            runPhase();
          }
        }, 1000);
      }

      runPhase();
    }

    startBtn.addEventListener('click', startExercise);

    stopBtn.addEventListener('click', () => {
      running = false;
      clearInterval(interval);

      phaseEl.textContent = 'Exercício parado';
      timerEl.textContent = '—';

      startBtn.disabled = false;
      stopBtn.style.display = 'none';

      circle.classList.remove('grow', 'shrink');
      circle.style.transform = 'scale(0.6)';
    });
  </script>
</body>
</html>
